# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
################################################################################

homepage: "https://github.com/google-gemini/gemini-cli"
language: javascript
primary_contact: "reconsumeralization@gmail.com"
auto_ccs:
  - "security@google.com"
vendor_ccs:
  - "reconsumeralization@gmail.com"
main_repo: "https://github.com/google-gemini/gemini-cli.git"

# OSS-Fuzz Integration for Gemini CLI - Foundation Setup
# TypeScript/JavaScript fuzzing with Jazzer.js
file_github_issue: true

# Build integration settings
build_integration:
  build_script: build.sh
  dockerfile: Dockerfile

# Sanitizers for JavaScript fuzzing (none for JS)
sanitizers:
  - none

# Fuzzing engines
fuzzing_engines:
  - libfuzzer

# Supported architectures
architectures:
  - x86_64

# Coverage configuration for TypeScript/JavaScript
coverage_extra_args: |
  --include=/src/gemini-cli/packages/cli/src/**/*.ts
  --include=/src/gemini-cli/packages/cli/src/**/*.tsx
  --include=/src/gemini-cli/packages/core/src/**/*.ts
  --exclude=/src/gemini-cli/**/node_modules/**
  --exclude=/src/gemini-cli/**/test*.ts
  --exclude=/src/gemini-cli/**/*.test.ts
  --exclude=/src/gemini-cli/**/dist/**
  --exclude=/src/gemini-cli/**/build/**
  --gcov-options="--branch-counts --branch-probabilities"
  --keep-going

# Fuzz introspector configuration - minimal for foundation
fuzz_introspector: |
  analyze: |
    # Foundation fuzz targets (Phase 1) - TypeScript/JavaScript
    - fuzzers/fuzz_config_parser.js
    - fuzzers/fuzz_cli_parser.js
    - fuzzers/fuzz_input_sanitizer.js

  # Performance optimization
  performance:
    target_executions_per_second: 1000
    max_memory_mb: 2048
    timeout_seconds: 30

# Labels for categorization
labels:
  - cli
  - security
  - javascript
  - typescript
  - nodejs
  - fuzzing
  - input-validation
